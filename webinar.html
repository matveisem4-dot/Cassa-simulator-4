<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ú–æ–π –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –í–µ–±–∏–Ω–∞—Ä</title>
    <style>
        :root {
            --primary: #6200ee;
            --bg: #0f172a;
            --surface: #1e293b;
            --text: #f8fafc;
        }

        body {
            margin: 0; font-family: 'Inter', sans-serif;
            background-color: var(--bg); color: var(--text);
            display: flex; flex-direction: column; height: 100vh;
        }

        /* –®–∞–ø–∫–∞ */
        header {
            height: 60px; background: var(--surface);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 20px; border-bottom: 1px solid #334155;
        }

        .container { display: flex; flex: 1; overflow: hidden; }

        /* –õ–µ–≤–∞—è —á–∞—Å—Ç—å: –í–∏–¥–µ–æ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ */
        .main-view { flex: 3; display: flex; flex-direction: column; padding: 20px; overflow-y: auto; }
        
        .video-wrapper {
            width: 100%; aspect-ratio: 16/9;
            background: #000; border-radius: 12px; overflow: hidden;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        }

        .info-card {
            margin-top: 20px; background: var(--surface);
            padding: 20px; border-radius: 12px;
        }

        /* –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å: –ß–∞—Ç */
        .sidebar {
            flex: 1; min-width: 350px; background: var(--surface);
            border-left: 1px solid #334155; display: flex; flex-direction: column;
        }

        #chat-box { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 10px; }
        
        .message { background: #334155; padding: 10px; border-radius: 8px; font-size: 14px; }
        .message b { color: #818cf8; display: block; margin-bottom: 4px; }

        .chat-input-area { padding: 15px; background: #0f172a; display: flex; gap: 10px; }
        
        input {
            flex: 1; background: #1e293b; border: 1px solid #334155;
            color: white; padding: 10px; border-radius: 6px; outline: none;
        }

        button {
            background: var(--primary); color: white; border: none;
            padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: bold;
        }

        .online-count { font-size: 14px; color: #10b981; }
    </style>
</head>
<body>

<header>
    <div style="font-size: 1.2rem; font-weight: bold;">üöÄ LIVE: –°–æ–∑–¥–∞–µ–º –ø—Ä–æ–µ–∫—Ç —Å –Ω—É–ª—è</div>
    <div class="online-count">‚óè <span id="counter">0</span> –ó—Ä–∏—Ç–µ–ª–µ–π</div>
</header>

<div class="container">
    <main class="main-view">
        <div class="video-wrapper">
            <iframe width="100%" height="100%" 
                src="https://www.youtube.com/embed/live_stream?channel=ID_–¢–í–û–ï–ì–û_–ö–ê–ù–ê–õ–ê" 
                frameborder="0" allowfullscreen>
            </iframe>
        </div>
        <div class="info-card">
            <h2>–û —á–µ–º —ç—Ç–æ—Ç –≤–µ–±–∏–Ω–∞—Ä?</h2>
            <p>–°–µ–≥–æ–¥–Ω—è –º—ã –∏–∑—É—á–∏–º, –∫–∞–∫ —Å–≤—è–∑—ã–≤–∞—Ç—å –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.</p>
        </div>
    </main>

    <aside class="sidebar">
        <div style="padding: 15px; border-bottom: 1px solid #334155; font-weight: bold;">–ß–∞—Ç —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏</div>
        <div id="chat-box"></div>
        <div class="chat-input-area">
            <input type="text" id="msgInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
            <button onclick="sendMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </div>
    </aside>
</div>

<script>
    const FIREBASE_CHAT_URL = "https://cassa-simulator-4-default-rtdb.firebaseio.com/webinar/messages.json";

    // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
    async function sendMessage() {
        const input = document.getElementById('msgInput');
        if (!input.value.trim()) return;

        const payload = {
            user: "–ì–æ—Å—Ç—å", // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ –∏–º–µ–Ω–∏
            text: input.value,
            timestamp: Date.now()
        };

        await fetch(FIREBASE_CHAT_URL, {
            method: 'POST',
            body: JSON.stringify(payload)
        });
        input.value = "";
    }

    // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
    function listenChat() {
        setInterval(async () => {
            try {
                const res = await fetch(FIREBASE_CHAT_URL);
                const data = await res.json();
                const chatBox = document.getElementById('chat-box');
                chatBox.innerHTML = "";
                
                for (let id in data) {
                    const m = data[id];
                    chatBox.innerHTML += `<div class="message"><b>${m.user}</b>${m.text}</div>`;
                }
                chatBox.scrollTop = chatBox.scrollHeight;
            } catch (e) {}
        }, 2000);
    }

    // –ò–º–∏—Ç–∞—Ü–∏—è —Å—á–µ—Ç—á–∏–∫–∞ –∑—Ä–∏—Ç–µ–ª–µ–π
    setInterval(() => {
        const count = Math.floor(Math.random() * (55 - 45) + 45);
        document.getElementById('counter').innerText = count;
    }, 5000);

    listenChat();
</script>

</body>
</html>
