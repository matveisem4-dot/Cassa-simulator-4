<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AURA Connect | PRO</title>
    <style>
        :root {
            --accent: #00f2fe;
            --error: #ff3860;
            --bg: #0a0e17;
            --card: rgba(255, 255, 255, 0.05);
        }

        body {
            margin: 0; background: var(--bg); color: #fff;
            font-family: 'Segoe UI', Roboto, sans-serif;
            display: flex; align-items: center; justify-content: center; height: 100vh;
            overflow: hidden;
        }

        /* --- –õ–û–ë–ë–ò --- */
        .aura-card {
            background: var(--card); backdrop-filter: blur(20px);
            padding: 40px; border-radius: 24px; border: 1px solid rgba(255,255,255,0.1);
            width: 100%; max-width: 400px; text-align: center;
            box-shadow: 0 30px 60px rgba(0,0,0,0.5);
            transition: 0.5s;
        }

        h1 { font-weight: 300; letter-spacing: 5px; color: var(--accent); margin-bottom: 30px; }

        .input-group { position: relative; margin-bottom: 15px; }
        
        input {
            width: 100%; padding: 15px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);
            background: rgba(0,0,0,0.4); color: #fff; font-size: 16px; transition: 0.3s;
        }
        input:focus { border-color: var(--accent); outline: none; background: rgba(0,0,0,0.6); }

        .btn-join {
            width: 100%; padding: 16px; border-radius: 12px; border: none;
            background: var(--accent); color: #000; font-weight: bold;
            font-size: 16px; cursor: pointer; transition: 0.3s;
        }
        .btn-join:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,242,254,0.3); }

        /* –ö–∞—Å—Ç–æ–º–Ω—ã–π –∞–ª–µ—Ä—Ç –≤–Ω—É—Ç—Ä–∏ —Ñ–æ—Ä–º—ã */
        #aura-alert {
            color: var(--error); font-size: 14px; margin-top: 15px;
            display: none; animation: shake 0.4s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* --- –ò–ù–¢–ï–†–§–ï–ô–° –¢–†–ê–ù–°–õ–Ø–¶–ò–ò --- */
        #stream-ui {
            display: none; width: 100vw; height: 100vh; flex-direction: column;
        }

        .stream-header {
            padding: 20px 40px; background: rgba(0,0,0,0.8);
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .live-tag {
            background: var(--error); padding: 4px 12px; border-radius: 4px;
            font-size: 12px; font-weight: bold; animation: blink 1.5s infinite;
        }

        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

        .main-stage {
            flex: 1; display: flex; align-items: center; justify-content: center;
            background: #000; position: relative;
        }

        video {
            max-width: 90%; max-height: 85%; border-radius: 16px;
            box-shadow: 0 0 100px rgba(0,242,254,0.1);
            background: #111;
        }

        .controls-bar {
            height: 80px; background: rgba(255,255,255,0.03);
            display: flex; align-items: center; justify-content: center; gap: 20px;
        }

        .circle-btn {
            width: 50px; height: 50px; border-radius: 50%; border: 1px solid rgba(255,255,255,0.1);
            background: none; color: #fff; cursor: pointer; transition: 0.3s;
        }
        .circle-btn:hover { background: var(--accent); color: #000; }
        .btn-exit { background: var(--error); border: none; }
    </style>
</head>
<body>

    <div id="lobby-ui" class="aura-card">
        <h1>AURA</h1>
        <div class="input-group">
            <input type="text" id="sphere-name" placeholder="ID –°—Ñ–µ—Ä—ã (–ù–∞–∑–≤–∞–Ω–∏–µ)">
        </div>
        <div class="input-group">
            <input type="password" id="sphere-key" placeholder="–ö–ª—é—á –¥–æ—Å—Ç—É–ø–∞">
        </div>
        
        <button class="btn-join" onclick="connectToSphere()">–ü–û–î–ö–õ–Æ–ß–ò–¢–¨–°–Ø</button>
        
        <div id="aura-alert">–û—à–∏–±–∫–∞: –ù–µ–≤–µ—Ä–Ω—ã–π –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞</div>
    </div>

    <div id="stream-ui">
        <div class="stream-header">
            <div style="display:flex; align-items:center; gap:15px;">
                <div class="live-tag">LIVE</div>
                <span id="display-name" style="letter-spacing: 2px;">–ü–û–¢–û–ö: –û–ñ–ò–î–ê–ù–ò–ï</span>
            </div>
            <button class="circle-btn btn-exit" onclick="exitSphere()">‚úï</button>
        </div>

        <div class="main-stage">
            <video id="webcam" autoplay playsinline muted></video>
        </div>

        <div class="controls-bar">
            <button class="circle-btn" onclick="toggleCam()">üì∑</button>
            <button class="circle-btn" onclick="toggleMic()">üéôÔ∏è</button>
            <button class="circle-btn">üí¨</button>
        </div>
    </div>

    <script>
        let localStream = null;

        // –í–º–µ—Å—Ç–æ –∞–ª–µ—Ä—Ç–æ–≤ ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ñ—É–Ω–∫—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function showAuraError(text) {
            const el = document.getElementById('aura-alert');
            el.innerText = text;
            el.style.display = 'block';
            setTimeout(() => { el.style.display = 'none'; }, 3000);
        }

        async function connectToSphere() {
            const id = document.getElementById('sphere-name').value.trim();
            const key = document.getElementById('sphere-key').value.trim();

            if(!id || !key) {
                showAuraError("–í–≤–µ–¥–∏—Ç–µ ID –∏ –ö–ª—é—á");
                return;
            }

            // –ò–º–∏—Ç–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ (–º–æ–∂–Ω–æ –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫ Firebase)
            // –î–æ–ø—É—Å—Ç–∏–º, —Å–æ–∑–¥–∞–µ–º –≤—Å—Ç—Ä–µ—á—É, –µ—Å–ª–∏ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
            enterRoom(id);
        }

        async function enterRoom(name) {
            document.getElementById('lobby-ui').style.display = 'none';
            document.getElementById('stream-ui').style.display = 'flex';
            document.getElementById('display-name').innerText = "–°–§–ï–†–ê: " + name.toUpperCase();

            try {
                localStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
                document.getElementById('webcam').srcObject = localStream;
            } catch (e) {
                showAuraError("–î–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω");
            }
        }

        function toggleCam() {
            if(localStream) {
                const videoTrack = localStream.getVideoTracks()[0];
                videoTrack.enabled = !videoTrack.enabled;
            }
        }

        function toggleMic() {
            if(localStream) {
                const audioTrack = localStream.getAudioTracks()[0];
                audioTrack.enabled = !audioTrack.enabled;
            }
        }

        function exitSphere() {
            if(localStream) {
                localStream.getTracks().forEach(track => track.stop());
            }
            location.reload();
        }
    </script>
</body>
</html>
